.ORG 0x00
	RJMP	MAIN
.ORG 0x1A
	RJMP	TIM1_OVF

TIM1_OVF:
	PUSH	R20
	LDS		R20, SREG
	PUSH	R20
	LDI		R20, 0x00
	STS		TCCR1B, R20
	LDI		R20, 1<<TOV1
	OUT		TIFR1, R20
	LDI		TEMP, 0
	RCALL	DELAY
	POP		R20
	STS		SREG, R20
	POP		R20
	RETI

.ORG 0x500

.DEF	COUNT1 = R17
.DEF	COUNT5 = R19
.DEF	TEMP = R23

.MACRO INITSTACK
	LDI		R16, HIGH(RAMEND)
	OUT		SPH, R16
	LDI		R17, LOW(RAMEND)
	OUT		SPL, R16
.ENDMACRO

DELAY:
	PUSH	R20
	LDI		R20, 0x0B
	STS		TCNT1H, R20
	LDI		R20, 0xDB
	STS		TCNT1L, R20
	LDI		R20, 0x00
	STS		TCCR1A, R20
	LDI		R20, 0x03
	STS		TCCR1B, R20
	LDI		R20, 0x01
	STS		TIMSK1, R20
	POP		R20
	RET