;
; DA2.asm
;
; Created: 3/9/2016 10:45:09 PM
; Author : jmsikorski
;

.INCLUDE "header.inc"

.ORG 0x100

MAIN:
	INITSTACK

	LDI		R18, 0xFF
	OUT		DDRB, R18
	OUT		DDRC, R18
	OUT		DDRD, R18
	LDI		COUNT1, 0x00
	LDI		COUNT5, 0x00
	LDI		R16, 0x00
	LDI		R18, 0x60
	LDI		R20, 0x00
	LDI		R21, 0x00
	LDI		R22, 0x20
	SEI
	RCALL	DELAY

COUNT:
	LDI		TEMP, 0x01
	SUBI	COUNT1, -1
	SUBI	COUNT5, -1
	OUT		PORTB, COUNT1
	MOV		R16, COUNT1
	LSR		R16
	LSR		R16
	ANDI	R16, 0x30
	CPI		COUNT5, 5
	BRNE	NOT5
	EOR		R21, R22
NOT5:
	CPI		COUNT5, 10
	BRNE	NOT10
	EOR		R21, R18
	LDI		COUNT5, 0
NOT10:
	OUT		PORTC, R16
	OUT		PORTD, R21

WAIT:
	CPI		TEMP, 0
	BREQ	COUNT		
	RJMP	WAIT